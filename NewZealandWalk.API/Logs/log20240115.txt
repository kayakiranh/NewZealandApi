2024-01-15 00:15:11.626 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:15:11.925 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:15:11.928 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:15:11.931 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:15:11.933 +03:00 [INF] Hosting environment: Development
2024-01-15 00:15:11.934 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:15:15.346 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:15:15.986 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:15:15.986 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:15:15.991 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 647.8953ms
2024-01-15 00:15:16.025 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 32.9322ms
2024-01-15 00:15:16.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 85.6849ms
2024-01-15 00:15:16.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:15:16.403 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 239.0197ms
2024-01-15 00:15:47.318 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 68
2024-01-15 00:15:47.460 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 00:15:47.485 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 00:15:47.712 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-01-15 00:15:47.739 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 246.6911ms
2024-01-15 00:15:47.745 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 00:15:47.749 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 68 - 400 - application/problem+json;+charset=utf-8 430.8458ms
2024-01-15 00:16:39.158 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 00:16:39.172 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 9.0032ms
2024-01-15 00:16:39.206 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 00:16:39.210 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 4.5985ms
2024-01-15 00:16:58.654 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 00:16:58.656 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 2.1774ms
2024-01-15 00:16:58.659 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 00:16:58.662 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 2.3827ms
2024-01-15 00:35:19.984 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:35:20.288 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:35:20.290 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:35:20.295 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:35:20.304 +03:00 [INF] Hosting environment: Development
2024-01-15 00:35:20.306 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:35:20.658 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:35:21.180 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 520.9454ms
2024-01-15 00:35:21.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:35:21.183 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:35:21.205 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 18.8252ms
2024-01-15 00:35:21.261 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 77.1694ms
2024-01-15 00:35:21.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:35:21.553 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 212.9717ms
2024-01-15 00:35:38.920 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:35:39.197 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:35:39.198 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:35:39.201 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:35:39.202 +03:00 [INF] Hosting environment: Development
2024-01-15 00:35:39.203 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:35:42.254 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:35:42.724 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:35:42.724 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:35:42.727 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 474.5691ms
2024-01-15 00:35:42.744 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 20.3743ms
2024-01-15 00:35:42.780 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 56.0852ms
2024-01-15 00:35:42.853 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:35:43.049 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 195.3645ms
2024-01-15 00:35:58.704 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 00:35:58.852 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:35:58.877 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 00:36:00.731 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 00:36:00.982 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 00:36:01.054 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 00:36:01.177 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 00:36:01.208 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 00:36:01.235 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2352.0372ms
2024-01-15 00:36:01.239 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:36:01.253 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2548.8872ms
2024-01-15 00:36:27.725 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:36:27.747 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:36:27.763 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 00:36:27.771 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:36:27.773 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 47.4664ms
2024-01-15 00:36:35.859 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:36:35.863 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:36:35.866 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 00:36:35.869 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:36:35.870 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 10.7473ms
2024-01-15 00:42:02.273 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:42:02.555 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:42:02.556 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:42:02.559 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:42:02.560 +03:00 [INF] Hosting environment: Development
2024-01-15 00:42:02.561 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:42:05.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:42:05.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:42:05.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:42:05.993 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 471.9328ms
2024-01-15 00:42:05.998 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 17.3306ms
2024-01-15 00:42:06.050 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.6436ms
2024-01-15 00:42:06.107 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:42:06.306 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 198.8584ms
2024-01-15 00:43:42.328 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 00:43:42.473 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:43:42.507 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 00:43:44.156 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 00:43:44.394 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 00:43:44.480 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 00:43:44.608 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 00:43:44.637 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 00:43:44.660 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2146.5083ms
2024-01-15 00:43:44.664 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:43:44.674 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2345.7760ms
2024-01-15 00:43:56.905 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:43:56.918 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:43:56.927 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:43:56.939 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:43:56.941 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 36.5417ms
2024-01-15 00:44:06.489 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:44:06.521 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 00:44:06.557 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 00:44:06.560 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:44:06.564 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:44:06.565 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 75.8256ms
2024-01-15 00:44:13.742 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:44:13.744 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:44:13.747 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:44:13.749 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:44:13.750 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 8.6944ms
2024-01-15 00:44:27.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:44:27.789 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 00:44:27.797 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 00:44:27.799 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:44:27.800 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:44:27.802 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 26.7146ms
2024-01-15 00:49:16.061 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:49:16.382 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:49:16.384 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:49:16.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:49:16.392 +03:00 [INF] Hosting environment: Development
2024-01-15 00:49:16.393 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:49:19.424 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:49:19.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:49:19.875 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:49:19.877 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 454.2664ms
2024-01-15 00:49:19.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.0051ms
2024-01-15 00:49:19.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 75.6808ms
2024-01-15 00:49:20.026 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:49:20.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.3249ms
2024-01-15 00:49:29.778 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 00:49:29.935 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:49:29.965 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 00:49:31.646 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 00:49:31.883 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 00:49:31.944 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 00:49:32.059 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 00:49:32.090 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 00:49:32.126 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2154.9514ms
2024-01-15 00:49:32.130 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:49:32.143 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2364.8086ms
2024-01-15 00:49:49.000 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:49:49.024 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:49:49.038 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:49:49.047 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:49:49.048 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 48.4272ms
2024-01-15 00:51:46.340 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:51:46.609 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:51:46.610 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:51:46.613 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:51:46.614 +03:00 [INF] Hosting environment: Development
2024-01-15 00:51:46.615 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:51:47.082 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:51:47.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 470.2943ms
2024-01-15 00:51:47.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:51:47.553 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:51:47.569 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 15.2373ms
2024-01-15 00:51:47.612 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 59.0992ms
2024-01-15 00:51:47.689 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:51:47.885 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.3204ms
2024-01-15 00:51:52.426 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 00:51:52.590 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:51:52.615 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 00:51:54.209 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 00:51:54.447 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 00:51:54.513 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 00:51:54.628 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 00:51:54.658 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 00:51:54.686 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2065.1715ms
2024-01-15 00:51:54.689 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:51:54.702 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2276.0685ms
2024-01-15 00:52:04.961 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:52:04.975 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:52:04.986 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:52:04.994 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:52:04.997 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 35.4841ms
2024-01-15 00:52:15.805 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 00:52:15.808 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 00:52:15.812 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 00:52:15.815 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 00:52:15.818 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 12.7415ms
2024-01-15 00:52:34.488 +03:00 [INF] Application is shutting down...
2024-01-15 00:53:26.465 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 00:53:26.742 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 00:53:26.744 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 00:53:26.746 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 00:53:26.747 +03:00 [INF] Hosting environment: Development
2024-01-15 00:53:26.748 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 00:53:29.760 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 00:53:30.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 00:53:30.215 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 00:53:30.220 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 460.7064ms
2024-01-15 00:53:30.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 21.3887ms
2024-01-15 00:53:30.285 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 70.4547ms
2024-01-15 00:53:30.347 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 00:53:30.540 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.2036ms
2024-01-15 00:53:34.347 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 00:53:34.497 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 00:53:34.522 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 00:53:36.088 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 00:53:36.335 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:00:07.851 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:00:07.989 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:00:08.019 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:00:08.043 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 393516.6379ms
2024-01-15 01:00:08.046 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:00:08.057 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 393709.7019ms
2024-01-15 01:00:20.944 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:00:20.951 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 7.2785ms
2024-01-15 01:00:20.955 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:00:20.962 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 6.3672ms
2024-01-15 01:00:45.779 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:00:45.794 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:00:45.811 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 01:00:45.820 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:00:45.822 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 42.7218ms
2024-01-15 01:01:51.155 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:01:51.158 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:01:51.163 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Reader)
2024-01-15 01:01:51.167 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:01:51.169 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 13.6238ms
2024-01-15 01:02:11.406 +03:00 [INF] Application is shutting down...
2024-01-15 01:06:18.896 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:06:19.176 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:06:19.178 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:06:19.180 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:06:19.181 +03:00 [INF] Hosting environment: Development
2024-01-15 01:06:19.182 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:06:19.711 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:06:20.148 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:06:20.148 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:06:20.148 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 438.9892ms
2024-01-15 01:06:20.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 19.3921ms
2024-01-15 01:06:20.215 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.0820ms
2024-01-15 01:06:20.280 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:06:20.468 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 187.8287ms
2024-01-15 01:06:26.041 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:06:26.207 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:06:26.235 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:06:28.032 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:06:28.282 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:06:31.514 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:06:31.642 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:06:31.678 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:06:31.710 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 5468.3902ms
2024-01-15 01:06:31.714 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:06:31.727 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 5686.1155ms
2024-01-15 01:06:44.348 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:06:44.365 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:06:44.376 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 01:06:44.386 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:06:44.387 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 39.8965ms
2024-01-15 01:08:37.255 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:08:37.521 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:08:37.523 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:08:37.525 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:08:37.526 +03:00 [INF] Hosting environment: Development
2024-01-15 01:08:37.527 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:08:40.918 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:08:41.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:08:41.477 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:08:41.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 565.7216ms
2024-01-15 01:08:41.491 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 14.2539ms
2024-01-15 01:08:41.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 64.5560ms
2024-01-15 01:08:41.628 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:08:41.834 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.3744ms
2024-01-15 01:08:54.636 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:08:54.788 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:08:54.814 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:08:56.557 +03:00 [INF] Executed DbCommand (58ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:08:56.795 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:08:58.961 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:08:59.115 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:08:59.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:08:59.200 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 4379.2733ms
2024-01-15 01:08:59.203 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:08:59.214 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 4578.5203ms
2024-01-15 01:09:08.526 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:09:08.542 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:09:08.543 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 01:09:08.554 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 01:09:08.871 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-01-15 01:09:09.056 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 01:09:09.178 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name]
FROM [Difficulties] AS [d]
2024-01-15 01:09:09.200 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewZealandWalk.API.Models.DataTransferObject.DifficultyDtos.DifficultyDto, NewZealandWalk.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 01:09:09.211 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 653.6812ms
2024-01-15 01:09:09.217 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 01:09:09.220 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 200 - application/json;+charset=utf-8 693.9112ms
2024-01-15 01:10:15.167 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 266
2024-01-15 01:10:15.173 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:10:15.175 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:10:15.189 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-01-15 01:10:15.203 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 23.4263ms
2024-01-15 01:10:15.205 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:10:15.206 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 266 - 400 - application/problem+json;+charset=utf-8 38.7428ms
2024-01-15 01:10:34.561 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 260
2024-01-15 01:10:34.563 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:10:34.571 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:10:34.598 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-01-15 01:10:34.602 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 22.9214ms
2024-01-15 01:10:34.604 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:10:34.606 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 260 - 400 - application/problem+json;+charset=utf-8 45.5218ms
2024-01-15 01:10:51.056 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 266
2024-01-15 01:10:51.058 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:10:51.060 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:11:00.498 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 9433.4066ms
2024-01-15 01:11:00.504 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:11:30.667 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:11:30.987 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:11:30.989 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:11:30.993 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:11:30.995 +03:00 [INF] Hosting environment: Development
2024-01-15 01:11:30.996 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:11:34.448 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:11:34.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:11:34.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:11:34.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 492.5978ms
2024-01-15 01:11:34.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 17.3803ms
2024-01-15 01:11:35.018 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 80.6428ms
2024-01-15 01:11:35.108 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:11:35.309 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 201.5598ms
2024-01-15 01:11:39.668 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 266
2024-01-15 01:11:39.814 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:11:39.845 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:11:53.627 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 13774.2234ms
2024-01-15 01:11:53.634 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:14:53.188 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:14:53.449 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:14:53.451 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:14:53.454 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:14:53.455 +03:00 [INF] Hosting environment: Development
2024-01-15 01:14:53.456 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:14:56.652 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:14:57.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 445.5550ms
2024-01-15 01:14:57.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:14:57.098 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:14:57.117 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 17.8037ms
2024-01-15 01:14:57.152 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.3005ms
2024-01-15 01:14:57.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:14:57.408 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 186.1963ms
2024-01-15 01:15:08.641 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:15:08.779 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:15:08.804 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:15:10.567 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:15:10.816 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:15:15.554 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:15:15.670 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:15:15.705 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:15:15.732 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 6922.6387ms
2024-01-15 01:15:15.736 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:15:15.747 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 7105.8032ms
2024-01-15 01:15:29.810 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:15:29.814 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 3.9211ms
2024-01-15 01:15:29.817 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:15:29.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 7.2317ms
2024-01-15 01:15:40.232 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:15:40.239 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:15:40.252 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:15:45.601 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 5343.8216ms
2024-01-15 01:15:45.609 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:17:19.183 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:17:19.464 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:17:19.466 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:17:19.469 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:17:19.470 +03:00 [INF] Hosting environment: Development
2024-01-15 01:17:19.471 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:17:19.939 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:17:20.379 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:17:20.379 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:17:20.385 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 448.0264ms
2024-01-15 01:17:20.395 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 16.0501ms
2024-01-15 01:17:20.452 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.0400ms
2024-01-15 01:17:20.511 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:17:20.701 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 189.7800ms
2024-01-15 01:17:26.020 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:17:26.165 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:17:26.189 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:17:28.309 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 2114.2672ms
2024-01-15 01:17:28.318 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:17:34.428 +03:00 [FTL] 5f47affb-6ca9-4825-926f-25c64758541e : IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 69
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:17:34.539 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 8519.0091ms
2024-01-15 01:17:43.189 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:17:43.195 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:17:43.197 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:17:45.106 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 1905.414ms
2024-01-15 01:17:45.112 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:22:48.610 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:22:48.884 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:22:48.885 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:22:48.887 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:22:48.888 +03:00 [INF] Hosting environment: Development
2024-01-15 01:22:48.889 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:22:49.360 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:22:49.803 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 445.1040ms
2024-01-15 01:22:49.803 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:22:49.803 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:22:49.855 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 50.8617ms
2024-01-15 01:22:49.899 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 95.6482ms
2024-01-15 01:22:49.962 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:22:50.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 225.6709ms
2024-01-15 01:22:52.565 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:22:52.711 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:22:52.735 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:22:59.991 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 7248.1703ms
2024-01-15 01:23:00.001 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:23:05.494 +03:00 [FTL] 038120b9-aa64-4d18-a11f-f06f8071a738 : Sequence contains no matching element
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 79
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:23:05.591 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 13025.3848ms
2024-01-15 01:23:08.779 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:23:08.784 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:23:08.787 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:23:34.782 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 25991.1871ms
2024-01-15 01:23:34.783 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:23:34.785 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:23:34.818 +03:00 [FTL] 529f487e-d0e4-43c4-99b9-c47fd55c5319 : Sequence contains no matching element
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 79
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:23:34.818 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 35.2164ms
2024-01-15 01:23:34.821 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:23:34.837 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 26058.0442ms
2024-01-15 01:23:34.838 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 17.6248ms
2024-01-15 01:23:41.033 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:23:41.040 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:23:41.076 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:23:42.646 +03:00 [INF] Executed DbCommand (56ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:23:42.903 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:23:46.896 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:23:47.040 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:23:47.074 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:23:47.092 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 6011.2451ms
2024-01-15 01:23:47.094 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:23:47.106 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 6073.2612ms
2024-01-15 01:24:04.375 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:24:04.377 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:24:04.379 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:24:09.080 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 4697.9293ms
2024-01-15 01:24:09.087 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:24:12.288 +03:00 [FTL] 64910f09-dd5f-42a0-8d98-196e2b948219 : Sequence contains no matching element
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 79
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:24:12.333 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 7957.6623ms
2024-01-15 01:24:15.796 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:24:15.799 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:24:15.801 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:24:57.819 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:24:57.822 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:24:57.821 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:24:57.828 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 0 - - 11.4004ms
2024-01-15 01:24:57.830 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 0 - - 7.9852ms
2024-01-15 01:24:57.830 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 42024.6017ms
2024-01-15 01:24:57.831 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 10.6952ms
2024-01-15 01:24:57.838 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:24:57.869 +03:00 [FTL] 099980ad-b959-4a5e-9feb-1400b80b2d80 : Sequence contains no matching element
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 79
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:24:57.889 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 42092.9836ms
2024-01-15 01:25:11.289 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:25:11.291 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:25:11.292 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:25:16.071 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 4774.8914ms
2024-01-15 01:25:16.077 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:25:21.529 +03:00 [FTL] 6eeaa4a4-f712-471f-8125-0a0b45271889 : Sequence contains no matching element
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 79
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:25:21.554 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 10265.5525ms
2024-01-15 01:25:23.728 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:25:23.731 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:25:23.733 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:26:06.211 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:26:06.462 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:26:06.463 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:26:06.465 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:26:06.466 +03:00 [INF] Hosting environment: Development
2024-01-15 01:26:06.467 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:26:06.938 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:26:07.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:26:07.495 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:26:07.495 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 541.2466ms
2024-01-15 01:26:07.515 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 13.5865ms
2024-01-15 01:26:07.552 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 56.4576ms
2024-01-15 01:26:07.617 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:26:07.855 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 238.6088ms
2024-01-15 01:26:09.873 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:26:10.020 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:26:10.054 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:26:16.136 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 6070.6431ms
2024-01-15 01:26:16.149 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:26:18.546 +03:00 [FTL] 88d02985-294d-4905-9ef8-432026d518d2 : Sequence contains no matching element
System.InvalidOperationException: Sequence contains no matching element
   at System.Linq.ThrowHelper.ThrowNoMatchException()
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source, Func`2 predicate)
   at NewZealandWalk.API.Repositories.TokenRepository.CreateNewTokens(String refreshToken) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Repositories\TokenRepository.cs:line 79
   at NewZealandWalk.API.Controllers.AuthController.RefreshV1(RefreshRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 111
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 01:26:18.642 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 500 - application/json;+charset=utf-8 8769.1481ms
2024-01-15 01:26:21.376 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:26:21.384 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:26:21.386 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:27:28.671 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:27:28.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 89.9847ms
2024-01-15 01:27:28.778 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:27:28.774 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:27:28.805 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 37.6873ms
2024-01-15 01:27:28.850 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 70.1154ms
2024-01-15 01:27:29.002 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:27:29.065 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 62.7069ms
2024-01-15 01:27:30.218 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:27:37.461 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:27:37.725 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:27:37.726 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:27:37.729 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:27:37.730 +03:00 [INF] Hosting environment: Development
2024-01-15 01:27:37.731 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:27:38.194 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:27:38.657 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 469.9461ms
2024-01-15 01:27:38.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:27:38.673 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:27:38.685 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.6888ms
2024-01-15 01:27:38.737 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 63.9564ms
2024-01-15 01:27:38.802 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:27:39.032 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 230.5506ms
2024-01-15 01:27:41.642 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490
2024-01-15 01:27:41.794 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:27:41.820 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:27:55.426 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:28:31.707 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:28:31.831 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:28:31.859 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:28:31.887 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 50061.2125ms
2024-01-15 01:28:31.891 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:28:31.905 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 490 - 200 - application/json;+charset=utf-8 50263.4547ms
2024-01-15 01:39:34.676 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:39:34.971 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:39:34.973 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:39:34.975 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:39:34.977 +03:00 [INF] Hosting environment: Development
2024-01-15 01:39:34.977 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:39:38.064 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:39:38.484 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:39:38.484 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:39:38.484 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 420.7674ms
2024-01-15 01:39:38.509 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 24.8246ms
2024-01-15 01:39:38.550 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 66.0569ms
2024-01-15 01:39:38.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:39:38.774 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 167.5599ms
2024-01-15 01:39:43.501 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:39:43.634 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:39:43.657 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:39:45.198 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:39:45.429 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:39:45.490 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:39:45.595 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:39:45.627 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:39:45.651 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 1987.9706ms
2024-01-15 01:39:45.655 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:39:45.665 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2163.6156ms
2024-01-15 01:39:56.669 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:39:56.673 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 4.0010ms
2024-01-15 01:39:56.676 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - -
2024-01-15 01:39:56.680 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/.well-known/openid-configuration - - - 404 0 - 4.2944ms
2024-01-15 01:40:27.603 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 843
2024-01-15 01:40:27.609 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:40:27.619 +03:00 [INF] Route matched with {action = "RefreshV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RefreshV1(NewZealandWalk.API.Models.Identity.DataTransferObject.RefreshDtos.RefreshRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:40:33.767 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:40:46.686 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:40:46.696 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:40:46.703 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:40:46.706 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API) in 19082.8954ms
2024-01-15 01:40:46.708 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RefreshV1 (NewZealandWalk.API)'
2024-01-15 01:40:46.714 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/refresh application/json 843 - 200 - application/json;+charset=utf-8 19110.5972ms
2024-01-15 01:41:27.625 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:41:27.873 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:41:27.875 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:41:27.877 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:41:27.878 +03:00 [INF] Hosting environment: Development
2024-01-15 01:41:27.879 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:41:28.308 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:41:28.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 423.0935ms
2024-01-15 01:41:28.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:41:28.729 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:41:28.759 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 29.7617ms
2024-01-15 01:41:28.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 79.9532ms
2024-01-15 01:41:28.863 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:41:29.057 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.3930ms
2024-01-15 01:41:45.749 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:41:45.884 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:41:45.906 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:41:47.383 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:41:47.618 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:41:47.694 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:41:47.814 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:41:47.841 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:41:47.865 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 1953.3394ms
2024-01-15 01:41:47.868 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:41:47.878 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2129.5407ms
2024-01-15 01:41:58.496 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:41:58.511 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:41:58.522 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 01:41:58.529 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:41:58.532 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 35.9695ms
2024-01-15 01:44:00.825 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:44:01.084 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:44:01.085 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:44:01.088 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:44:01.090 +03:00 [INF] Hosting environment: Development
2024-01-15 01:44:01.090 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:44:04.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:44:04.465 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 431.2976ms
2024-01-15 01:44:04.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:44:04.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:44:04.488 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 17.3957ms
2024-01-15 01:44:04.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 61.5659ms
2024-01-15 01:44:04.588 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:44:04.761 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 173.1027ms
2024-01-15 01:44:08.297 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:44:08.441 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:44:08.451 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 01:44:08.457 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:44:08.460 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 163.0136ms
2024-01-15 01:44:12.492 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 01:44:12.501 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:44:12.524 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 01:44:14.018 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 01:44:14.292 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 01:44:14.342 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 01:44:14.464 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 01:44:14.488 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 01:44:14.514 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 1981.688ms
2024-01-15 01:44:14.518 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 01:44:14.531 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2038.8450ms
2024-01-15 01:44:30.226 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:44:30.230 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:44:30.234 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 01:44:30.236 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:44:30.237 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 11.5142ms
2024-01-15 01:45:01.568 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:45:01.814 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:45:01.815 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:45:01.817 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:45:01.818 +03:00 [INF] Hosting environment: Development
2024-01-15 01:45:01.819 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:45:04.937 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:45:05.363 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 429.4750ms
2024-01-15 01:45:05.402 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:45:05.402 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:45:05.412 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.7411ms
2024-01-15 01:45:05.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 50.5914ms
2024-01-15 01:45:05.500 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:45:05.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 181.8994ms
2024-01-15 01:45:08.569 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:45:08.719 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:45:08.729 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 01:45:08.734 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:45:08.736 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 166.6410ms
2024-01-15 01:46:19.048 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:46:19.124 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 01:46:19.182 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 01:46:19.187 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 01:46:19.192 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:46:19.194 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 146.3546ms
2024-01-15 01:46:25.501 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:46:25.503 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:46:25.504 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 01:46:25.507 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:46:25.508 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 7.9198ms
2024-01-15 01:46:31.714 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:46:31.716 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:46:31.717 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 01:46:31.719 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:46:31.720 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 6.1022ms
2024-01-15 01:49:39.621 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:49:39.871 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:49:39.872 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:49:39.874 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:49:39.875 +03:00 [INF] Hosting environment: Development
2024-01-15 01:49:39.876 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:49:42.964 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:49:43.428 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 469.0290ms
2024-01-15 01:49:43.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:49:43.430 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:49:43.453 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 17.0732ms
2024-01-15 01:49:43.485 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.3957ms
2024-01-15 01:49:43.542 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:49:43.724 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 182.0244ms
2024-01-15 01:49:47.039 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:49:47.185 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:49:47.193 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 01:49:47.199 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:49:47.202 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 162.3024ms
2024-01-15 01:56:40.120 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 01:56:40.405 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 01:56:40.407 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 01:56:40.409 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 01:56:40.410 +03:00 [INF] Hosting environment: Development
2024-01-15 01:56:40.411 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 01:56:43.484 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 01:56:43.898 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 414.0472ms
2024-01-15 01:56:43.899 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 01:56:43.899 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 01:56:43.927 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 27.0206ms
2024-01-15 01:56:43.957 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.4469ms
2024-01-15 01:56:44.014 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 01:56:44.184 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 169.6815ms
2024-01-15 01:56:47.923 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 01:56:48.083 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 01:56:48.094 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 01:56:48.099 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 01:56:48.101 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 178.8298ms
2024-01-15 02:00:56.012 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:00:56.247 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:00:56.249 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:00:56.253 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:00:56.255 +03:00 [INF] Hosting environment: Development
2024-01-15 02:00:56.256 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:00:59.353 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:00:59.808 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:00:59.857 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 505.2757ms
2024-01-15 02:00:59.857 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:00:59.870 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.0160ms
2024-01-15 02:00:59.871 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:00:59.932 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 60.4315ms
2024-01-15 02:01:00.033 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:01:00.076 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:01:00.088 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:01:00.095 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:01:00.098 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 290.1897ms
2024-01-15 02:01:00.273 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.5532ms
2024-01-15 02:01:11.658 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:01:11.667 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:01:11.672 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:01:11.675 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:01:11.678 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 19.4762ms
2024-01-15 02:04:59.250 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:04:59.499 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:04:59.501 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:04:59.503 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:04:59.504 +03:00 [INF] Hosting environment: Development
2024-01-15 02:04:59.505 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:05:07.642 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:05:08.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:05:08.122 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:05:08.122 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 478.1685ms
2024-01-15 02:05:08.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 21.3603ms
2024-01-15 02:05:08.192 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 70.3415ms
2024-01-15 02:05:08.272 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:05:08.511 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 238.5500ms
2024-01-15 02:05:10.493 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:05:11.144 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:05:11.151 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:05:11.158 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:05:11.161 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 667.5888ms
2024-01-15 02:11:57.708 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:11:58.039 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:11:58.042 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:11:58.046 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:11:58.048 +03:00 [INF] Hosting environment: Development
2024-01-15 02:11:58.049 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:12:00.579 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:12:01.167 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 591.4024ms
2024-01-15 02:12:01.181 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:12:01.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 25.0682ms
2024-01-15 02:12:01.440 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:12:01.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 349.7194ms
2024-01-15 02:12:04.993 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 02:12:05.132 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:12:05.156 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:12:07.498 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:12:08.048 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:12:08.246 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:12:08.528 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:12:08.565 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:12:08.592 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 3428.3617ms
2024-01-15 02:12:08.595 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:12:08.607 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 3613.3542ms
2024-01-15 02:12:22.307 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:12:22.317 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:12:22.325 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:12:22.327 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 19.6139ms
2024-01-15 02:12:43.786 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:12:43.836 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:12:43.867 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:12:43.871 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:12:43.875 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:12:43.877 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 91.2596ms
2024-01-15 02:12:54.030 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:12:54.033 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:12:54.035 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:12:54.036 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:12:54.038 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 7.1702ms
2024-01-15 02:17:05.103 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:17:05.461 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:17:05.463 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:17:05.466 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:17:05.467 +03:00 [INF] Hosting environment: Development
2024-01-15 02:17:05.468 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:17:08.589 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:17:09.076 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 489.8707ms
2024-01-15 02:17:09.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:17:09.084 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:17:09.100 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 14.9688ms
2024-01-15 02:17:09.181 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 97.4179ms
2024-01-15 02:17:09.263 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:17:09.587 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 323.1865ms
2024-01-15 02:18:28.124 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:18:28.422 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:18:28.423 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:18:28.426 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:18:28.427 +03:00 [INF] Hosting environment: Development
2024-01-15 02:18:28.428 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:18:31.582 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:18:32.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 498.5674ms
2024-01-15 02:18:32.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:18:32.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:18:32.106 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 18.4130ms
2024-01-15 02:18:32.155 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 73.6917ms
2024-01-15 02:18:32.236 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:18:32.462 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 226.4760ms
2024-01-15 02:19:48.633 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:19:48.718 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:19:48.862 +03:00 [FTL] 75ea2110-f4e3-47da-be80-76d66673962d : Endpoint NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseAuthorization() must go between them.
System.InvalidOperationException: Endpoint NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseAuthorization() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingAuthMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 02:19:48.924 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 291.6646ms
2024-01-15 02:20:38.176 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:20:38.419 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:20:38.420 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:20:38.423 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:20:38.424 +03:00 [INF] Hosting environment: Development
2024-01-15 02:20:38.425 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:20:38.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:20:39.210 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 425.2454ms
2024-01-15 02:20:39.212 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:20:39.212 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:20:39.219 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 6.4197ms
2024-01-15 02:20:39.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 52.0000ms
2024-01-15 02:20:39.323 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:20:39.494 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 171.2290ms
2024-01-15 02:20:42.766 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:20:42.859 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:20:42.988 +03:00 [FTL] 306e9b7f-be9a-4cc7-b41e-b7fed4025f9e : Endpoint NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseAuthorization() must go between them.
System.InvalidOperationException: Endpoint NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) contains authorization metadata, but a middleware was not found that supports authorization.
Configure your application startup by adding app.UseAuthorization() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseAuthorization() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingAuthMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 02:20:43.054 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 287.8854ms
2024-01-15 02:21:27.333 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:21:27.574 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:21:27.576 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:21:27.578 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:21:27.580 +03:00 [INF] Hosting environment: Development
2024-01-15 02:21:27.580 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:21:30.692 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:21:31.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:21:31.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:21:31.123 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 435.1705ms
2024-01-15 02:21:31.138 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 14.0638ms
2024-01-15 02:21:31.208 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 84.3974ms
2024-01-15 02:21:31.285 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:21:31.475 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 189.6418ms
2024-01-15 02:21:34.114 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:21:34.257 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:21:34.265 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:21:34.271 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:21:34.273 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 159.0519ms
2024-01-15 02:22:50.464 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:22:50.723 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:22:50.725 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:22:50.727 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:22:50.728 +03:00 [INF] Hosting environment: Development
2024-01-15 02:22:50.729 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:22:51.025 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:22:51.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:22:51.445 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:22:51.448 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 424.4780ms
2024-01-15 02:22:51.462 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.5118ms
2024-01-15 02:22:51.499 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.2482ms
2024-01-15 02:22:51.560 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:22:51.736 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.1946ms
2024-01-15 02:22:55.136 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:22:55.280 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:22:55.289 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:22:55.295 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:22:55.297 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 160.8377ms
2024-01-15 02:23:30.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:23:30.167 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:23:30.205 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:23:30.209 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:23:30.210 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:23:30.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 117.3309ms
2024-01-15 02:26:58.644 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:26:59.077 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:26:59.078 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:26:59.081 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:26:59.082 +03:00 [INF] Hosting environment: Development
2024-01-15 02:26:59.083 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:27:02.402 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:27:02.823 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:27:02.823 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:27:02.824 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 420.6408ms
2024-01-15 02:27:02.839 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.3383ms
2024-01-15 02:27:02.872 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.0962ms
2024-01-15 02:27:02.924 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:27:03.104 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 179.2882ms
2024-01-15 02:27:06.327 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:27:06.470 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:27:06.480 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:27:06.485 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:27:06.487 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 160.1248ms
2024-01-15 02:27:23.136 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:27:23.195 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:27:23.233 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:27:23.235 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:27:23.237 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:27:23.238 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 102.6795ms
2024-01-15 02:31:07.426 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:31:07.540 +03:00 [FTL] Application startup exception
System.InvalidOperationException: Scheme already exists: Bearer
   at Microsoft.AspNetCore.Authentication.AuthenticationOptions.AddScheme(String name, Action`1 configureBuilder)
   at Microsoft.Extensions.Options.ConfigureNamedOptions`1.Configure(String name, TOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.UnnamedOptionsManager`1.get_Value()
   at Microsoft.AspNetCore.Authentication.AuthenticationSchemeProvider..ctor(IOptions`1 options, IDictionary`2 schemes)
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.ConstructorInvoker.Invoke(Object obj, IntPtr* args, BindingFlags invokeAttr)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.CreateServiceAccessor(ServiceIdentifier serviceIdentifier)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(Type serviceType)
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2024-01-15 02:31:37.508 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:31:37.760 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:31:37.761 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:31:37.763 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:31:37.764 +03:00 [INF] Hosting environment: Development
2024-01-15 02:31:37.765 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:31:40.777 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:31:41.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:31:41.202 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:31:41.202 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 424.8418ms
2024-01-15 02:31:41.212 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 9.5634ms
2024-01-15 02:31:41.249 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 47.1876ms
2024-01-15 02:31:41.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:31:41.485 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 170.7096ms
2024-01-15 02:31:56.102 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:31:56.293 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10500: Signature validation failed. No security keys were provided to validate the signature.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:31:56.330 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10500: Signature validation failed. No security keys were provided to validate the signature.
2024-01-15 02:31:56.339 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:31:56.344 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:31:56.345 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 243.7441ms
2024-01-15 02:32:03.104 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 02:32:03.114 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:32:03.137 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:32:04.658 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:32:04.891 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:32:04.942 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 02:32:04.992 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:32:05.125 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserTokens] ([LoginProvider], [Name], [UserId], [Value])
VALUES (@p0, @p1, @p2, @p3);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 02:32:05.155 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:32:05.167 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:32:05.180 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:32:05.202 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2058.3019ms
2024-01-15 02:32:05.205 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:32:05.214 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2109.5655ms
2024-01-15 02:32:22.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:32:22.506 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10500: Signature validation failed. No security keys were provided to validate the signature.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:32:22.511 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10500: Signature validation failed. No security keys were provided to validate the signature.
2024-01-15 02:32:22.514 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:32:22.517 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:32:22.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 16.7507ms
2024-01-15 02:40:56.049 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:40:56.294 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:40:56.295 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:40:56.297 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:40:56.298 +03:00 [INF] Hosting environment: Development
2024-01-15 02:40:56.299 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:40:56.735 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:40:57.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:40:57.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:40:57.177 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 443.3316ms
2024-01-15 02:40:57.194 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 18.3876ms
2024-01-15 02:40:57.234 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.5406ms
2024-01-15 02:40:57.289 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:40:57.469 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 180.4834ms
2024-01-15 02:41:02.998 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 02:41:03.136 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:41:03.158 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:41:04.639 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:41:04.864 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:41:04.942 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 02:41:04.988 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:41:05.105 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 02:41:05.135 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:41:05.143 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:41:05.159 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:41:05.184 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2020.379ms
2024-01-15 02:41:05.187 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:41:05.198 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 2199.6830ms
2024-01-15 02:41:23.679 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:41:23.720 +03:00 [ERR] Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.TypeLoadException: Could not load type 'Microsoft.IdentityModel.Json.JsonConvert' from assembly 'Microsoft.IdentityModel.Tokens, Version=7.2.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.Microsoft.IdentityModel.Protocols.IConfigurationRetriever<Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfiguration>.GetConfigurationAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:41:23.802 +03:00 [FTL] 5f85d9fc-e23c-4b16-9ae6-46bb874156b1 : IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.TypeLoadException: Could not load type 'Microsoft.IdentityModel.Json.JsonConvert' from assembly 'Microsoft.IdentityModel.Tokens, Version=7.2.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.Microsoft.IdentityModel.Protocols.IConfigurationRetriever<Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfiguration>.GetConfigurationAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 02:41:23.838 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 158.5213ms
2024-01-15 02:41:43.221 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:41:43.225 +03:00 [ERR] Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:41:43.276 +03:00 [FTL] dc6c8721-4009-4fb9-8ed7-18c36a9c8153 : IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 02:41:43.284 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 62.6006ms
2024-01-15 02:44:40.212 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:44:40.478 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:44:40.479 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:44:40.482 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:44:40.483 +03:00 [INF] Hosting environment: Development
2024-01-15 02:44:40.483 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:44:45.417 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:44:45.737 +03:00 [ERR] Exception occurred while processing message.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.TypeLoadException: Could not load type 'Microsoft.IdentityModel.Json.JsonConvert' from assembly 'Microsoft.IdentityModel.Tokens, Version=7.2.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.Microsoft.IdentityModel.Protocols.IConfigurationRetriever<Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfiguration>.GetConfigurationAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:44:45.818 +03:00 [FTL] a0f63624-f247-44bb-a8a3-d4773844b096 : IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.TypeLoadException: Could not load type 'Microsoft.IdentityModel.Json.JsonConvert' from assembly 'Microsoft.IdentityModel.Tokens, Version=7.2.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at System.Runtime.CompilerServices.AsyncMethodBuilderCore.Start[TStateMachine](TStateMachine& stateMachine)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.Microsoft.IdentityModel.Protocols.IConfigurationRetriever<Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfiguration>.GetConfigurationAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.AuthenticateAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.AuthenticateAsync(HttpContext context, String scheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 02:44:45.904 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 489.0273ms
2024-01-15 02:44:50.460 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:44:50.681 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 220.6257ms
2024-01-15 02:44:50.693 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:44:50.693 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:44:50.725 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 27.2986ms
2024-01-15 02:44:50.765 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 71.4451ms
2024-01-15 02:44:50.816 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:44:50.997 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 180.7682ms
2024-01-15 02:45:40.765 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:45:41.027 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:45:41.028 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:45:41.031 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:45:41.032 +03:00 [INF] Hosting environment: Development
2024-01-15 02:45:41.033 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:45:48.259 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:45:48.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:45:48.706 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:45:48.708 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 450.7534ms
2024-01-15 02:45:48.720 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 13.8967ms
2024-01-15 02:45:48.771 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 65.4073ms
2024-01-15 02:45:48.836 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:45:49.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 185.3083ms
2024-01-15 02:45:51.579 +03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:45:51.730 +03:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2024-01-15 02:45:51.737 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:45:51.745 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:45:51.747 +03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 168.6105ms
2024-01-15 02:48:59.100 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:50:51.761 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:50:52.150 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:50:52.151 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:50:52.153 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:50:52.155 +03:00 [INF] Hosting environment: Development
2024-01-15 02:50:52.156 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:51:01.605 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:51:02.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:51:02.044 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:51:02.044 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 440.7284ms
2024-01-15 02:51:02.058 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 13.9196ms
2024-01-15 02:51:02.103 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.6614ms
2024-01-15 02:51:02.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:51:02.343 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 179.8861ms
2024-01-15 02:51:09.763 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 02:51:09.901 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:51:09.923 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:51:11.493 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:51:11.719 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:51:11.849 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 02:51:11.904 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:51:12.035 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 02:51:12.074 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:51:12.086 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:51:12.104 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:51:12.127 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2198.5141ms
2024-01-15 02:51:12.129 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:51:12.141 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2377.8341ms
2024-01-15 02:56:35.525 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:56:35.875 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:56:35.876 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:56:35.879 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:56:35.879 +03:00 [INF] Hosting environment: Development
2024-01-15 02:56:35.880 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:56:43.766 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:56:44.217 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:56:44.217 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:56:44.218 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 452.3154ms
2024-01-15 02:56:44.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.2433ms
2024-01-15 02:56:44.267 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.8237ms
2024-01-15 02:56:44.351 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:56:44.525 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 174.1531ms
2024-01-15 02:56:56.860 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 02:56:57.011 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:56:57.039 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:56:58.692 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:56:58.924 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:56:58.999 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 02:56:59.035 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:56:59.152 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 02:56:59.188 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:56:59.200 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:56:59.221 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:56:59.246 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2200.1028ms
2024-01-15 02:56:59.248 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:56:59.261 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2400.9116ms
2024-01-15 02:57:14.258 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:57:14.299 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:57:14.331 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:57:14.342 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:57:14.349 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:57:14.351 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 93.3913ms
2024-01-15 02:57:20.095 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty?queryName=11 - -
2024-01-15 02:57:20.108 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:57:20.124 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:57:20.128 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:57:20.130 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:57:20.134 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty?queryName=11 - - - 401 0 - 38.8092ms
2024-01-15 02:57:24.908 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/region - -
2024-01-15 02:57:24.911 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:57:24.928 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'Qpar0Mlk3v_AxoPoE1hcTtubCcdomLnV2zdaymP-fiw'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:57:24.935 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 02:57:24.939 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:57:24.940 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/region - - - 401 0 - 31.6970ms
2024-01-15 02:59:02.035 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 02:59:02.379 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 02:59:02.380 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 02:59:02.383 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 02:59:02.384 +03:00 [INF] Hosting environment: Development
2024-01-15 02:59:02.385 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 02:59:10.523 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 02:59:10.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 02:59:10.942 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 02:59:10.943 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 422.1015ms
2024-01-15 02:59:10.972 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 30.3224ms
2024-01-15 02:59:11.011 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 69.6344ms
2024-01-15 02:59:11.068 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 02:59:11.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 176.5534ms
2024-01-15 02:59:22.234 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/register application/json 102
2024-01-15 02:59:22.458 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API)'
2024-01-15 02:59:22.490 +03:00 [INF] Route matched with {action = "RegisterV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterV1(NewZealandWalk.API.Models.DataTransferObject.RegisterDtos.RegisterRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:59:24.203 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:59:24.410 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiration], [SecurityStamp], [Token], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2024-01-15 02:59:24.441 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-01-15 02:59:24.489 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2024-01-15 02:59:24.502 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-01-15 02:59:24.522 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:59:24.576 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [RefreshToken] = @p13, [RefreshTokenExpiration] = @p14, [SecurityStamp] = @p15, [Token] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2024-01-15 02:59:24.608 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-01-15 02:59:24.618 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API) in 2119.4104ms
2024-01-15 02:59:24.622 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API)'
2024-01-15 02:59:24.642 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/register application/json 102 - 200 0 - 2407.2770ms
2024-01-15 02:59:27.437 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 02:59:27.442 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:59:27.448 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:59:27.513 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:59:27.639 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:59:27.699 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 02:59:27.714 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:59:27.726 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserTokens] ([LoginProvider], [Name], [UserId], [Value])
VALUES (@p0, @p1, @p2, @p3);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 02:59:27.736 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:59:27.748 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:59:27.760 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:59:27.776 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 324.3848ms
2024-01-15 02:59:27.777 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:59:27.781 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 200 - application/json;+charset=utf-8 344.1465ms
2024-01-15 02:59:40.558 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 02:59:40.566 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:59:40.568 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 02:59:40.597 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 02:59:40.672 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 02:59:40.681 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 02:59:40.689 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:59:40.704 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 02:59:40.715 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 02:59:40.723 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 02:59:40.731 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 02:59:40.734 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 162.4613ms
2024-01-15 02:59:40.736 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 02:59:40.740 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 181.7797ms
2024-01-15 02:59:55.727 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 02:59:55.785 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 02:59:55.798 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 02:59:55.807 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 02:59:55.815 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 02:59:55.818 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 91.2779ms
2024-01-15 03:04:46.939 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:04:47.249 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:04:47.250 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:04:47.253 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:04:47.254 +03:00 [INF] Hosting environment: Development
2024-01-15 03:04:47.254 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:04:55.976 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:04:56.400 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 425.9216ms
2024-01-15 03:04:56.405 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:04:56.405 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:04:56.414 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 9.3274ms
2024-01-15 03:04:56.453 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 48.6504ms
2024-01-15 03:04:56.519 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:04:56.687 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.3301ms
2024-01-15 03:05:10.920 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:05:11.091 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:05:11.114 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:05:12.672 +03:00 [INF] Executed DbCommand (54ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:05:12.893 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:05:12.967 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:05:13.008 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:05:13.123 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:05:13.163 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:05:13.176 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:05:13.198 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:05:13.229 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2108.6937ms
2024-01-15 03:05:13.232 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:05:13.247 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2326.1552ms
2024-01-15 03:05:22.834 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:05:22.839 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:05:22.850 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 03:05:24.896 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 2041.3786ms
2024-01-15 03:05:24.901 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:05:28.606 +03:00 [FTL] 281fd524-6a93-4dc8-bb10-902cb0d76064 : Value cannot be null. (Parameter 'principal')
System.ArgumentNullException: Value cannot be null. (Parameter 'principal')
   at Microsoft.AspNetCore.Identity.UserManager`1.GetUserAsync(ClaimsPrincipal principal)
   at NewZealandWalk.API.Controllers.DifficultyController.GetAll(String queryName, Nullable`1 isOrderName, Nullable`1 page) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\DifficultyController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:05:28.682 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 5848.0333ms
2024-01-15 03:05:40.320 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:05:40.361 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 03:05:40.376 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:05:40.378 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:05:40.380 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 03:05:41.668 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 1285.097ms
2024-01-15 03:05:41.674 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:05:43.527 +03:00 [FTL] ee6e83bc-7f2c-4bde-93e9-0332a916d369 : Value cannot be null. (Parameter 'principal')
System.ArgumentNullException: Value cannot be null. (Parameter 'principal')
   at Microsoft.AspNetCore.Identity.UserManager`1.GetUserAsync(ClaimsPrincipal principal)
   at NewZealandWalk.API.Controllers.DifficultyController.GetAll(String queryName, Nullable`1 isOrderName, Nullable`1 page) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\DifficultyController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:05:43.555 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 3235.1071ms
2024-01-15 03:06:15.514 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:06:15.820 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:06:15.822 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:06:15.824 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:06:15.826 +03:00 [INF] Hosting environment: Development
2024-01-15 03:06:15.826 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:06:16.123 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:06:16.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:06:16.548 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:06:16.548 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 425.6633ms
2024-01-15 03:06:16.558 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 9.7394ms
2024-01-15 03:06:16.597 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 48.7613ms
2024-01-15 03:06:16.670 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:06:16.837 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 166.8575ms
2024-01-15 03:06:37.049 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:06:37.298 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 03:06:37.313 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:06:37.326 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:06:37.357 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:06:38.851 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:06:39.092 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:06:39.131 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:06:39.166 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:06:39.292 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:06:39.327 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:06:39.338 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:06:39.353 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:06:39.374 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2010.018ms
2024-01-15 03:06:39.376 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:06:39.387 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2337.2494ms
2024-01-15 03:06:54.838 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/region - -
2024-01-15 03:06:54.850 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 03:06:54.861 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:06:54.878 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:06:54.892 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:06:54.893 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/region - - - 401 0 - 55.6340ms
2024-01-15 03:07:10.155 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/region - -
2024-01-15 03:07:10.159 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 03:07:10.177 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:07:10.183 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:07:10.187 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:07:10.188 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/region - - - 401 0 - 33.5210ms
2024-01-15 03:07:16.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/region - -
2024-01-15 03:07:16.686 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:07:16.694 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:07:16.696 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/region - - - 401 0 - 12.5959ms
2024-01-15 03:07:40.236 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/region - -
2024-01-15 03:07:40.239 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 03:07:40.255 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:07:40.257 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:07:40.259 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:07:40.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/region - - - 401 0 - 24.0111ms
2024-01-15 03:13:15.823 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:13:16.101 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:13:16.102 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:13:16.105 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:13:16.106 +03:00 [INF] Hosting environment: Development
2024-01-15 03:13:16.107 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:13:27.083 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:13:27.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:13:27.606 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:13:27.610 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 525.5892ms
2024-01-15 03:13:27.619 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.9785ms
2024-01-15 03:13:27.674 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.2459ms
2024-01-15 03:13:27.745 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:13:27.941 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 196.0592ms
2024-01-15 03:13:34.506 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:13:34.672 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:13:34.697 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:13:36.507 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:13:36.745 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:13:36.823 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:13:36.862 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:13:37.016 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:13:37.049 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:13:37.089 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:13:37.128 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:13:37.188 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2480.2187ms
2024-01-15 03:13:37.191 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:13:37.208 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2702.4740ms
2024-01-15 03:13:40.908 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:13:40.928 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 03:13:40.941 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:13:40.943 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 34.7859ms
2024-01-15 03:14:03.592 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:14:03.665 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignatureAndIssuerSecurityKey(String token, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2024-01-15 03:14:03.688 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:14:03.693 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'ymil3h3G2Oc4qggMC_DF871qOOopQgvJJI4xv2EqqG4'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'System.IdentityModel.Tokens.Jwt.JwtSecurityToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-01-15 03:14:03.698 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 03:14:03.705 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:14:03.706 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 114.5885ms
2024-01-15 03:17:31.415 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:17:31.693 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:17:31.695 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:17:31.697 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:17:31.698 +03:00 [INF] Hosting environment: Development
2024-01-15 03:17:31.699 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:17:38.927 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:17:39.468 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 527.2306ms
2024-01-15 03:17:39.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:17:39.470 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:17:39.478 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 7.9369ms
2024-01-15 03:17:39.528 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.7150ms
2024-01-15 03:17:39.585 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:17:39.790 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 204.8895ms
2024-01-15 03:18:01.711 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/register application/json 95
2024-01-15 03:18:01.858 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API)'
2024-01-15 03:18:01.882 +03:00 [INF] Route matched with {action = "RegisterV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterV1(NewZealandWalk.API.Models.DataTransferObject.RegisterDtos.RegisterRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:18:02.090 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-01-15 03:18:02.109 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API) in 220.2497ms
2024-01-15 03:18:02.114 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API)'
2024-01-15 03:18:02.119 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/register application/json 95 - 400 - application/problem+json;+charset=utf-8 408.5662ms
2024-01-15 03:18:12.010 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/register application/json 96
2024-01-15 03:18:12.018 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API)'
2024-01-15 03:18:12.031 +03:00 [INF] Route matched with {action = "RegisterV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] RegisterV1(NewZealandWalk.API.Models.DataTransferObject.RegisterDtos.RegisterRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:18:13.554 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:18:13.779 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [AspNetUsers] ([Id], [AccessFailedCount], [ConcurrencyStamp], [Discriminator], [Email], [EmailConfirmed], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [RefreshToken], [RefreshTokenExpiration], [SecurityStamp], [Token], [TwoFactorEnabled], [UserName])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2024-01-15 03:18:13.823 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-01-15 03:18:13.892 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[RoleId]
FROM [AspNetUserRoles] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[RoleId] = @__p_1
2024-01-15 03:18:13.907 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedRoleName_0
2024-01-15 03:18:13.934 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:18:14.009 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p19='?' (Size = 450), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p20='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (DbType = Boolean), @p7='?' (DbType = DateTimeOffset), @p8='?' (Size = 256), @p9='?' (Size = 256), @p10='?' (Size = 4000), @p11='?' (Size = 4000), @p12='?' (DbType = Boolean), @p13='?' (Size = 4000), @p14='?' (DbType = DateTime2), @p15='?' (Size = 4000), @p16='?' (Size = 4000), @p17='?' (DbType = Boolean), @p18='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [LockoutEnabled] = @p6, [LockoutEnd] = @p7, [NormalizedEmail] = @p8, [NormalizedUserName] = @p9, [PasswordHash] = @p10, [PhoneNumber] = @p11, [PhoneNumberConfirmed] = @p12, [RefreshToken] = @p13, [RefreshTokenExpiration] = @p14, [SecurityStamp] = @p15, [Token] = @p16, [TwoFactorEnabled] = @p17, [UserName] = @p18
OUTPUT 1
WHERE [Id] = @p19 AND [ConcurrencyStamp] = @p20;
2024-01-15 03:18:14.040 +03:00 [INF] Executing StatusCodeResult, setting HTTP status code 200
2024-01-15 03:18:14.045 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API) in 2009.441ms
2024-01-15 03:18:14.048 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.RegisterV1 (NewZealandWalk.API)'
2024-01-15 03:18:14.064 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/register application/json 96 - 200 0 - 2053.9970ms
2024-01-15 03:18:22.556 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:18:22.560 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:18:22.568 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:18:22.647 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:18:22.774 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:18:22.840 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:18:22.856 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:18:22.869 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 450), @p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [AspNetUserTokens] ([LoginProvider], [Name], [UserId], [Value])
VALUES (@p0, @p1, @p2, @p3);
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:18:22.881 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:18:22.891 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:18:22.898 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:18:22.908 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 337.3136ms
2024-01-15 03:18:22.910 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:18:22.913 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 357.3566ms
2024-01-15 03:18:34.267 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:18:34.286 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 03:18:34.302 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:18:34.304 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 37.1166ms
2024-01-15 03:18:45.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:18:45.344 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:18:45.350 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 03:18:45.554 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-01-15 03:18:45.621 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 03:18:45.704 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name]
FROM [Difficulties] AS [d]
2024-01-15 03:18:45.723 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewZealandWalk.API.Models.DataTransferObject.DifficultyDtos.DifficultyDto, NewZealandWalk.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 03:18:45.735 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 381.4025ms
2024-01-15 03:18:45.737 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:18:45.739 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 200 - application/json;+charset=utf-8 454.5788ms
2024-01-15 03:19:27.894 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:19:28.183 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:19:28.184 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:19:28.186 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:19:28.187 +03:00 [INF] Hosting environment: Development
2024-01-15 03:19:28.188 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:19:35.798 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:19:36.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:19:36.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:19:36.287 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 489.9399ms
2024-01-15 03:19:36.298 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 13.6341ms
2024-01-15 03:19:36.359 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 75.2406ms
2024-01-15 03:19:36.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:19:36.641 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 207.9207ms
2024-01-15 03:19:54.055 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:19:54.204 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:19:54.229 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:19:55.907 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:19:56.160 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:19:56.230 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:19:56.273 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:19:56.410 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:19:56.444 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:19:56.458 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:19:56.478 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:19:56.503 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2268.5564ms
2024-01-15 03:19:56.506 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:19:56.517 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2462.4541ms
2024-01-15 03:20:05.954 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:20:05.979 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:20:05.989 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:20:05.992 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 37.6048ms
2024-01-15 03:20:13.771 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:20:13.819 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:20:13.824 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:20:13.826 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 54.8317ms
2024-01-15 03:20:29.107 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:20:29.111 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:20:29.113 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:20:29.114 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 7.6214ms
2024-01-15 03:20:42.364 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:20:42.367 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:20:42.370 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:20:42.371 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 7.3837ms
2024-01-15 03:21:48.588 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:21:48.861 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:21:48.863 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:21:48.865 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:21:48.866 +03:00 [INF] Hosting environment: Development
2024-01-15 03:21:48.867 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:21:49.297 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:21:49.756 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 461.1578ms
2024-01-15 03:21:49.761 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:21:49.761 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:21:49.781 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 19.2449ms
2024-01-15 03:21:49.816 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 55.1439ms
2024-01-15 03:21:49.887 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:21:50.081 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.5104ms
2024-01-15 03:22:05.052 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:22:05.136 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:22:05.159 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:22:06.910 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:22:07.171 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:22:07.279 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:22:07.321 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:22:07.451 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:22:07.483 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:22:07.496 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:22:07.517 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:22:07.542 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2376.4686ms
2024-01-15 03:22:07.545 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:22:07.557 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2505.3871ms
2024-01-15 03:22:21.647 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:22:21.671 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:22:21.731 +03:00 [FTL] 29a36faa-9895-4a75-9c46-9adc058203c0 : No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:22:21.795 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 500 - application/json;+charset=utf-8 148.0048ms
2024-01-15 03:25:01.023 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:25:01.373 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:25:01.375 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:25:01.377 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:25:01.378 +03:00 [INF] Hosting environment: Development
2024-01-15 03:25:01.379 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:25:08.814 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:25:09.329 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:25:09.329 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:25:09.330 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 515.3945ms
2024-01-15 03:25:09.347 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 16.2893ms
2024-01-15 03:25:09.397 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 68.4897ms
2024-01-15 03:25:09.471 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:25:09.671 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 199.8086ms
2024-01-15 03:25:18.044 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:25:18.205 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:25:18.238 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:25:19.882 +03:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:25:20.112 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:25:20.199 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:25:20.242 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:25:20.391 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:25:20.423 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:25:20.433 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:25:20.450 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:25:20.471 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2225.523ms
2024-01-15 03:25:20.474 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:25:20.484 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2440.3198ms
2024-01-15 03:25:31.629 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:25:31.651 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:25:31.659 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:25:31.661 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 32.4164ms
2024-01-15 03:25:40.034 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:25:40.092 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:25:40.096 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:25:40.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 63.5913ms
2024-01-15 03:28:02.127 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:28:02.389 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:28:02.390 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:28:02.393 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:28:02.394 +03:00 [INF] Hosting environment: Development
2024-01-15 03:28:02.394 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:28:11.545 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:28:12.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:28:12.007 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:28:12.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 477.6343ms
2024-01-15 03:28:12.031 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 24.4128ms
2024-01-15 03:28:12.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 64.1046ms
2024-01-15 03:28:12.129 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:28:12.335 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 206.3033ms
2024-01-15 03:28:28.119 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:28:28.276 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:28:28.301 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:28:29.839 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:28:30.070 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:28:30.139 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:28:30.172 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:28:30.288 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:28:30.326 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:28:30.340 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:28:30.356 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:28:30.376 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2068.7339ms
2024-01-15 03:28:30.378 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:28:30.389 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2269.8647ms
2024-01-15 03:28:50.436 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:28:50.510 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:28:50.515 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:28:50.517 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 80.4648ms
2024-01-15 03:29:30.783 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:29:31.028 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:29:31.029 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:29:31.031 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:29:31.032 +03:00 [INF] Hosting environment: Development
2024-01-15 03:29:31.033 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:29:37.966 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:29:38.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:29:38.397 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:29:38.404 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 439.0279ms
2024-01-15 03:29:38.425 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 28.3411ms
2024-01-15 03:29:38.457 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 60.1853ms
2024-01-15 03:29:38.526 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:29:38.700 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 174.3324ms
2024-01-15 03:29:45.649 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:29:45.882 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:29:45.886 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:29:45.887 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 238.6334ms
2024-01-15 03:30:26.641 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:30:27.047 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:30:27.050 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:30:27.056 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:30:27.059 +03:00 [INF] Hosting environment: Development
2024-01-15 03:30:27.060 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:30:36.897 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:30:37.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:30:37.350 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 455.2805ms
2024-01-15 03:30:37.348 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:30:37.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 17.9873ms
2024-01-15 03:30:37.417 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 68.9023ms
2024-01-15 03:30:37.490 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:30:37.666 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 175.7156ms
2024-01-15 03:30:45.573 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:30:45.738 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:30:45.759 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:30:47.391 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:30:47.664 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:30:47.730 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:30:47.764 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:30:47.880 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:30:47.909 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:30:47.918 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:30:47.935 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:30:47.955 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2190.0061ms
2024-01-15 03:30:47.957 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:30:47.967 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2394.0786ms
2024-01-15 03:31:07.063 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:31:07.127 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|Reader)
2024-01-15 03:31:07.131 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:31:07.133 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 70.2432ms
2024-01-15 03:31:50.700 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:31:50.949 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:31:50.950 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:31:50.954 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:31:50.956 +03:00 [INF] Hosting environment: Development
2024-01-15 03:31:50.958 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:31:51.407 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:31:51.829 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 422.7558ms
2024-01-15 03:31:51.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:31:51.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:31:51.843 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 13.0780ms
2024-01-15 03:31:51.889 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 59.1508ms
2024-01-15 03:31:51.951 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:31:52.131 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 179.7900ms
2024-01-15 03:31:59.213 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:31:59.429 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:31:59.453 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 03:32:00.176 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-01-15 03:32:00.831 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 03:32:00.980 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name]
FROM [Difficulties] AS [d]
2024-01-15 03:32:01.025 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewZealandWalk.API.Models.DataTransferObject.DifficultyDtos.DifficultyDto, NewZealandWalk.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 03:32:01.051 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 1591.8654ms
2024-01-15 03:32:01.055 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:32:01.071 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 200 - application/json;+charset=utf-8 1857.7772ms
2024-01-15 03:32:48.902 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:32:49.156 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:32:49.157 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:32:49.160 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:32:49.161 +03:00 [INF] Hosting environment: Development
2024-01-15 03:32:49.162 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:32:49.575 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:32:50.010 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:32:50.010 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:32:50.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 439.5927ms
2024-01-15 03:32:50.024 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 12.7647ms
2024-01-15 03:32:50.075 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 64.8446ms
2024-01-15 03:32:50.135 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:32:50.337 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 202.2428ms
2024-01-15 03:32:58.360 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:32:58.590 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (xxx|yyy)
2024-01-15 03:32:58.597 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:32:58.600 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 239.6798ms
2024-01-15 03:33:15.647 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:33:15.911 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:33:15.913 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:33:15.916 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:33:15.917 +03:00 [INF] Hosting environment: Development
2024-01-15 03:33:15.918 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:33:24.584 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:33:25.001 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 418.2365ms
2024-01-15 03:33:25.009 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:33:25.014 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:33:25.021 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 11.6148ms
2024-01-15 03:33:25.064 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.1948ms
2024-01-15 03:33:25.113 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:33:25.288 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 174.9314ms
2024-01-15 03:33:30.911 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:33:31.130 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer|yyy)
2024-01-15 03:33:31.134 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:33:31.136 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 224.2818ms
2024-01-15 03:33:59.835 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:34:00.156 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:34:00.158 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:34:00.160 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:34:00.161 +03:00 [INF] Hosting environment: Development
2024-01-15 03:34:00.162 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:34:08.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:34:08.583 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:34:08.583 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:34:08.583 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 422.4916ms
2024-01-15 03:34:08.594 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 10.4059ms
2024-01-15 03:34:08.638 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 54.4506ms
2024-01-15 03:34:08.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:34:08.868 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 168.5351ms
2024-01-15 03:34:16.566 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:34:16.773 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Writer)
2024-01-15 03:34:16.777 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-01-15 03:34:16.779 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 403 0 - 213.1451ms
2024-01-15 03:34:30.069 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:34:30.318 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:34:30.320 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:34:30.322 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:34:30.323 +03:00 [INF] Hosting environment: Development
2024-01-15 03:34:30.324 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:34:38.753 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:34:39.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:34:39.175 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:34:39.175 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 423.7825ms
2024-01-15 03:34:39.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 11.1874ms
2024-01-15 03:34:39.221 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 46.2309ms
2024-01-15 03:34:39.288 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:34:39.470 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 181.2021ms
2024-01-15 03:34:45.184 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:34:45.396 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:34:45.418 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 03:34:46.062 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-01-15 03:34:46.692 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 03:34:46.840 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name]
FROM [Difficulties] AS [d]
2024-01-15 03:34:46.879 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewZealandWalk.API.Models.DataTransferObject.DifficultyDtos.DifficultyDto, NewZealandWalk.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 03:34:46.902 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 1477.6335ms
2024-01-15 03:34:46.905 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:34:46.916 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 200 - application/json;+charset=utf-8 1731.3880ms
2024-01-15 03:47:17.999 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:47:18.265 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:47:18.267 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:47:18.269 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:47:18.270 +03:00 [INF] Hosting environment: Development
2024-01-15 03:47:18.271 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:47:25.778 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:47:26.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 431.0606ms
2024-01-15 03:47:26.213 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:47:26.213 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:47:26.225 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 11.7223ms
2024-01-15 03:47:26.266 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 53.1143ms
2024-01-15 03:47:26.330 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:47:26.519 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 188.7377ms
2024-01-15 03:47:39.450 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:47:39.594 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:47:39.617 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:47:39.772 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 148.6806ms
2024-01-15 03:47:39.776 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:47:39.819 +03:00 [FTL] 6a838640-75b2-41a0-8993-c3d357f2b140 : Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[NewZealandWalk.API.Models.Identity.Domain.AppUser]' while attempting to activate 'NewZealandWalk.API.Controllers.AuthController'.
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[NewZealandWalk.API.Models.Identity.Domain.AppUser]' while attempting to activate 'NewZealandWalk.API.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:47:39.885 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 500 - application/json;+charset=utf-8 435.2436ms
2024-01-15 03:48:21.178 +03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68
2024-01-15 03:48:21.185 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:48:21.187 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:48:21.197 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 8.4172ms
2024-01-15 03:48:21.200 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:48:21.258 +03:00 [FTL] 76cbdd44-2c1b-4e8d-83bd-1f73a5625ce8 : Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[NewZealandWalk.API.Models.Identity.Domain.AppUser]' while attempting to activate 'NewZealandWalk.API.Controllers.AuthController'.
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[NewZealandWalk.API.Models.Identity.Domain.AppUser]' while attempting to activate 'NewZealandWalk.API.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:48:21.274 +03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7265/api/v1/auth/login application/json 68 - 500 - application/json;+charset=utf-8 96.5408ms
2024-01-15 03:51:06.995 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:51:07.252 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:51:07.254 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:51:07.256 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:51:07.257 +03:00 [INF] Hosting environment: Development
2024-01-15 03:51:07.258 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:51:17.332 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:51:17.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:51:17.765 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:51:17.766 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 436.3896ms
2024-01-15 03:51:17.782 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 16.0533ms
2024-01-15 03:51:17.825 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 59.4797ms
2024-01-15 03:51:17.891 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:51:18.080 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 188.9567ms
2024-01-15 03:51:38.789 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:51:38.939 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-01-15 03:51:38.947 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-01-15 03:51:38.949 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 401 0 - 161.0183ms
2024-01-15 03:52:01.687 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:52:01.703 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:52:01.730 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:52:01.884 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 148.1975ms
2024-01-15 03:52:01.888 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:52:01.933 +03:00 [FTL] acf85eaa-bada-4d83-b2d3-dc0eb8b47752 : Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[NewZealandWalk.API.Models.Identity.Domain.AppUser]' while attempting to activate 'NewZealandWalk.API.Controllers.AuthController'.
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.AspNetCore.Identity.SignInManager`1[NewZealandWalk.API.Models.Identity.Domain.AppUser]' while attempting to activate 'NewZealandWalk.API.Controllers.AuthController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:52:02.004 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 500 - application/json;+charset=utf-8 317.0921ms
2024-01-15 03:52:58.630 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:52:58.884 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:52:58.885 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:52:58.887 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:52:58.888 +03:00 [INF] Hosting environment: Development
2024-01-15 03:52:58.889 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:53:06.682 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:53:07.139 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:53:07.139 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:53:07.141 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 460.0810ms
2024-01-15 03:53:07.154 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 15.1560ms
2024-01-15 03:53:07.188 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.0565ms
2024-01-15 03:53:07.259 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:53:07.448 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 188.2753ms
2024-01-15 03:53:16.972 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:53:17.114 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:53:17.136 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:53:18.658 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:53:18.898 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:53:18.981 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:53:19.018 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:53:19.132 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:53:19.165 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:53:19.178 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:53:23.273 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-01-15 03:53:23.311 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:53:23.326 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-01-15 03:53:23.349 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2024-01-15 03:53:23.484 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 6341.8449ms
2024-01-15 03:53:23.487 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:53:23.597 +03:00 [FTL] f4d4c34b-7c9d-48c7-93ef-2997ade8037e : No sign-in authentication handler is registered for the scheme 'Identity.Application'. The registered sign-in schemes are: Cookies. Did you forget to call AddAuthentication().AddCookie("Identity.Application",...)?
System.InvalidOperationException: No sign-in authentication handler is registered for the scheme 'Identity.Application'. The registered sign-in schemes are: Cookies. Did you forget to call AddAuthentication().AddCookie("Identity.Application",...)?
   at Microsoft.AspNetCore.Authentication.AuthenticationService.SignInAsync(HttpContext context, String scheme, ClaimsPrincipal principal, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Identity.SignInManager`1.SignInWithClaimsAsync(TUser user, AuthenticationProperties authenticationProperties, IEnumerable`1 additionalClaims)
   at NewZealandWalk.API.Controllers.AuthController.LoginV1(LoginRequestDto model) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Controllers\AuthController.cs:line 103
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at NewZealandWalk.API.Middlewares.ExceptionHandlerMiddleware.InvokeAsync(HttpContext httpContext) in C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API\Middlewares\ExceptionHandlerMiddleware.cs:line 20
2024-01-15 03:53:23.672 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 500 - application/json;+charset=utf-8 6700.4960ms
2024-01-15 03:54:36.812 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:54:37.238 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:54:37.240 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:54:37.242 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:54:37.243 +03:00 [INF] Hosting environment: Development
2024-01-15 03:54:37.244 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:55:05.382 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:55:05.632 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:55:05.634 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:55:05.636 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:55:05.637 +03:00 [INF] Hosting environment: Development
2024-01-15 03:55:05.638 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:55:22.230 +03:00 [INF] User profile is available. Using 'C:\Users\husey\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-01-15 03:55:22.516 +03:00 [INF] Now listening on: https://localhost:7265
2024-01-15 03:55:22.518 +03:00 [INF] Now listening on: http://localhost:5070
2024-01-15 03:55:22.520 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-01-15 03:55:22.521 +03:00 [INF] Hosting environment: Development
2024-01-15 03:55:22.522 +03:00 [INF] Content root path: C:\Users\husey\Documents\GitHub\NewZealandWalk\NewZealandWalk.API
2024-01-15 03:55:30.733 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/index.html - -
2024-01-15 03:55:31.158 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/index.html - - - 200 - text/html;charset=utf-8 423.8748ms
2024-01-15 03:55:31.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - -
2024-01-15 03:55:31.163 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/_vs/browserLink - -
2024-01-15 03:55:31.173 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_framework/aspnetcore-browser-refresh.js - - - 200 12368 application/javascript;+charset=utf-8 10.1586ms
2024-01-15 03:55:31.230 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 67.7799ms
2024-01-15 03:55:31.292 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - -
2024-01-15 03:55:31.507 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 215.1913ms
2024-01-15 03:56:11.228 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65
2024-01-15 03:56:11.313 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:56:11.335 +03:00 [INF] Route matched with {action = "LoginV1", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] LoginV1(NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginRequestDto) on controller NewZealandWalk.API.Controllers.AuthController (NewZealandWalk.API).
2024-01-15 03:56:13.045 +03:00 [INF] Executed DbCommand (66ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedEmail] = @__normalizedEmail_0
2024-01-15 03:56:13.301 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:56:13.413 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (Size = 450), @__p_1='?' (Size = 450), @__p_2='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[UserId], [a].[LoginProvider], [a].[Name], [a].[Value]
FROM [AspNetUserTokens] AS [a]
WHERE [a].[UserId] = @__p_0 AND [a].[LoginProvider] = @__p_1 AND [a].[Name] = @__p_2
2024-01-15 03:56:13.448 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:56:13.572 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 450), @p3='?' (Size = 450), @p0='?' (Size = 4000), @p21='?' (Size = 450), @p4='?' (DbType = Int32), @p5='?' (Size = 4000), @p22='?' (Size = 4000), @p6='?' (Size = 256), @p7='?' (DbType = Boolean), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?' (Size = 256), @p11='?' (Size = 256), @p12='?' (Size = 4000), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (Size = 4000), @p16='?' (DbType = DateTime2), @p17='?' (Size = 4000), @p18='?' (Size = 4000), @p19='?' (DbType = Boolean), @p20='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [AspNetUserTokens] SET [Value] = @p0
OUTPUT 1
WHERE [LoginProvider] = @p1 AND [Name] = @p2 AND [UserId] = @p3;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p4, [ConcurrencyStamp] = @p5, [Email] = @p6, [EmailConfirmed] = @p7, [LockoutEnabled] = @p8, [LockoutEnd] = @p9, [NormalizedEmail] = @p10, [NormalizedUserName] = @p11, [PasswordHash] = @p12, [PhoneNumber] = @p13, [PhoneNumberConfirmed] = @p14, [RefreshToken] = @p15, [RefreshTokenExpiration] = @p16, [SecurityStamp] = @p17, [Token] = @p18, [TwoFactorEnabled] = @p19, [UserName] = @p20
OUTPUT 1
WHERE [Id] = @p21 AND [ConcurrencyStamp] = @p22;
2024-01-15 03:56:13.602 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Discriminator], [a].[Email], [a].[EmailConfirmed], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [a].[RefreshToken], [a].[RefreshTokenExpiration], [a].[Token]
FROM [AspNetUsers] AS [a]
WHERE [a].[Discriminator] = N'AppUser' AND [a].[NormalizedUserName] = @__normalizedUserName_0
2024-01-15 03:56:13.611 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p17='?' (Size = 450), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p18='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (DbType = Boolean), @p5='?' (DbType = DateTimeOffset), @p6='?' (Size = 256), @p7='?' (Size = 256), @p8='?' (Size = 4000), @p9='?' (Size = 4000), @p10='?' (DbType = Boolean), @p11='?' (Size = 4000), @p12='?' (DbType = DateTime2), @p13='?' (Size = 4000), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [LockoutEnabled] = @p4, [LockoutEnd] = @p5, [NormalizedEmail] = @p6, [NormalizedUserName] = @p7, [PasswordHash] = @p8, [PhoneNumber] = @p9, [PhoneNumberConfirmed] = @p10, [RefreshToken] = @p11, [RefreshTokenExpiration] = @p12, [SecurityStamp] = @p13, [Token] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2024-01-15 03:56:13.633 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__user_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[ClaimType], [a].[ClaimValue], [a].[UserId]
FROM [AspNetUserClaims] AS [a]
WHERE [a].[UserId] = @__user_Id_0
2024-01-15 03:56:13.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2024-01-15 03:56:13.654 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[ConcurrencyStamp], [a].[Name], [a].[NormalizedName]
FROM [AspNetRoles] AS [a]
WHERE [a].[NormalizedName] = @__normalizedName_0
2024-01-15 03:56:13.679 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__role_Id_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[ClaimType], [a].[ClaimValue]
FROM [AspNetRoleClaims] AS [a]
WHERE [a].[RoleId] = @__role_Id_0
2024-01-15 03:56:13.700 +03:00 [INF] AuthenticationScheme: Identity.Application signed in.
2024-01-15 03:56:13.714 +03:00 [INF] Executing OkObjectResult, writing value of type 'NewZealandWalk.API.Models.Identity.DataTransferObject.LoginDtos.LoginResponseDto'.
2024-01-15 03:56:13.739 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API) in 2396.6454ms
2024-01-15 03:56:13.741 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.AuthController.LoginV1 (NewZealandWalk.API)'
2024-01-15 03:56:13.753 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7265/api/v1/auth/login application/json 65 - 200 - application/json;+charset=utf-8 2524.9336ms
2024-01-15 03:56:42.158 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7265/api/v1/difficulty - -
2024-01-15 03:56:42.189 +03:00 [INF] Executing endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:56:42.195 +03:00 [INF] Route matched with {action = "GetAll", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String, System.Nullable`1[System.Boolean], System.Nullable`1[System.Int32]) on controller NewZealandWalk.API.Controllers.DifficultyController (NewZealandWalk.API).
2024-01-15 03:56:42.394 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2024-01-15 03:56:42.469 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-01-15 03:56:42.561 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name]
FROM [Difficulties] AS [d]
2024-01-15 03:56:42.588 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NewZealandWalk.API.Models.DataTransferObject.DifficultyDtos.DifficultyDto, NewZealandWalk.API, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-01-15 03:56:42.598 +03:00 [INF] Executed action NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API) in 400.0733ms
2024-01-15 03:56:42.602 +03:00 [INF] Executed endpoint 'NewZealandWalk.API.Controllers.DifficultyController.GetAll (NewZealandWalk.API)'
2024-01-15 03:56:42.604 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7265/api/v1/difficulty - - - 200 - application/json;+charset=utf-8 445.6051ms
